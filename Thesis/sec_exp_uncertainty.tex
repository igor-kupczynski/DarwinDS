\section{Presence of uncertainty}
In the previous sections the algorithm's results were analyzed. It was assumed
that the problems were well-specified with no room for uncertainty. It was a
way to test the algorithm's behavior and to get the idea about its properties.

It is often impossible to specify the exact values of each coefficient in the
problem. One may want to specify some of the coefficients in the form of
intervals of the possible values. Then he or she is interested in a robust
solution taking into account many possible scenarios of imprecision
(see~[inref]). This is possible with the DARWIN method.

Now the tests performed earlier will be extended to ``robust'' problems ---
i.e.the ones with interval coefficients. Note that now it is impossible to
compare a result with the optimal solution, even assuming the supposed utility
function. However, a point of reference is needed in order to know what
performance can be expected from the method. The author decided to compare the
results with the supposed utility function optimization.

As a reference point for comparison result generated as follows was taken. The
whole exterior loop (see~[inref]) is left intact but in the interior loop the
goal function for evolutionary optimization changes. Instead of optimization
based on primary and secondary score the supposed utility function is the one
to be taken into account. This way it is possible to measure how well the DM's
preferences are inferred by the DARWIN method. And the preference gathering is
definitely the most important and unique part of this method.

Like in previous sections all tests were repeated at least fifteen times and
results were averaged unless stated otherwise.

\subsection{Single run analysis}
Before evaluating performances on exemplary problems it is a good idea to
analyze a single run on a single problem. It can indicate interesting
properties or potential problems of the algorithm.

The problem being evaluated is a two criteria mix problem (this a problem
presented at the original DARWIN lecture given at~[ref]). Note that although
the problem has only two-criteria in its definition it has to be considered in
a space with more dimensions. This is because the supposed utility function is
defined not in the original two-criteria space (\textit{max} profit,
\textit{min} time) but rather in a quantile space (see~[inref]). The function
is defined as follows:
\begin{equation*}
\textit{max}: \hspace{0.2cm} \text{profit}^{1\%} + 3 * \text{profit}^{25\%} +
2 * \text{profit}^{50\%} - \text{time}^{1\%} - 3 * \text{time}^{25\%} - 2 *
\text{time}^{50\%}
\end{equation*}

So the space has six dimensions: $p^{1\%} \times p^{25\%} \times p^{50\%}
\times t^{1\%} \times t^{25\%} \times t^{50\%}$; $t$ is for time and $p$ for
profit.

\begin{figure}
  \centering
  \includegraphics[width=0.8\textwidth]{exp/uncert/pres_utilouter}
  \caption{Supposed utility function in exterior loop iterations for the
    mix-problem}
  \label{pres_utilouter}
\end{figure}

Basic performance of a single run is presented in
figure~\ref{pres_utilouter}. As one can see the algorithm needs only four
iterations to reach the maximum value --- a point where no further improvement
occurs\footnote{This is not an optimal solution to the problem. By their
  nature --- intervals and scenarios of uncertainty --- a problem from this
  section does not have an optimal value.}.

Improvements of the supposed utility function and primary score are shown in
figures~\ref{pres_utilgen_01},~\ref{pres_utilgen_03} whereas the shape of the
population in fig.~\ref{pres_utilind_01},~\ref{pres_utilind_03}. One can see
that it is easy to generate a good solution to the problem --- a solution with
the best result in a given run appears in the first few generations.

Having six-dimensional objective space it is impossible to provide a section
of this space on a two-dimensional chart. However, these dimensions are not
completely independent. There is a correlation between the quantiles of the
same objective. This can be observed in fig.~\ref{pres_valweight} --- showing
the movement of population during the generation on a section of objective
space, or even better in fig.~\ref{pres_dm_choices} --- solutions marked by the
decision maker as ``good''.

As expected the solutions chosen by the DM are near the pareto-front. However,
not all of them are part of the front. Knowing that there are four other goals
besides profit$^{50\%}$ and time$^{50\%}$ explains the phenomenon.

\begin{figure}
  \centering
  \includegraphics[width=1\textwidth]{exp/uncert/pres_utilgen_01}
  \caption{Supposed utility function and primary score improvements in an
    example run of the interior loop}
  \label{pres_utilgen_01}
\end{figure}

\begin{figure}
  \centering
  \includegraphics[width=1\textwidth]{exp/uncert/pres_utilgen_03}
  \caption{Supposed utility function and primary score improvements in an example run of the
    interior loop}
  \label{pres_utilgen_03}
\end{figure}

\begin{figure}
  \centering
  \includegraphics[width=1\textwidth]{exp/uncert/pres_utilind_01}
  \caption{Changes of the population shape in an example run of the interior
    loop}
  \label{pres_utilind_01}
\end{figure}

\begin{figure}
  \centering
  \includegraphics[width=1\textwidth]{exp/uncert/pres_utilind_03}
  \caption{Changes of the population shape in an example run of the interior
    loop}
  \label{pres_utilind_03}
\end{figure}

\begin{figure}
  \centering
  \makebox[\textwidth]{
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/pres_valweight_01}
      \label{pres_valweight_01}
    }
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/pres_valweight_03}
      \label{pres_valweight_03}
    }
  }
  \caption{Two-dimensional section of the objective space}
  \label{pres_valweight}
\end{figure}

\begin{figure}
  \centering
  \makebox[\textwidth]{
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/pres_dm_choices_01}
      \label{pres_dm_choices_01}
    }
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/pres_dm_choices_03}
      \label{pres_dm_choices_03}
    }
  }
  \caption{Two-dimensional section of the objective space}
  \label{pres_dm_choices}
\end{figure}
\clearpage{}

\subsection{The performance on exemplary problems}
To see how well DARWIN can infer the decision maker's preferences a comparison
with the supposed utility function is given. For this section the experiments
were performed on all exemplary problems with interval coefficients --- mix
problem (also labeled as presentation problem), dtlz1 (version with four and
ten criteria) and dtlz7.

The problems were solved with default (base) values of configuration options
as well as with an increased number of generations (from $30$ to $60$). Tests
whose names end with \texttt{\_rules} are using primary and secondary score;
tests with names ending with \texttt{\_supp} are using the supposed utility
function value as an objective in evolutionary optimization.

\begin{figure}
  \centering
  \makebox[\textwidth]{
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/pres_perf1}
      \label{pres_perf1}
    }
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/pres_perf1b}
      \label{pres_perf1b}
    }
  }
  \caption{Performance comparison on the mix problem}
  \label{pres_perf}
\end{figure}

\begin{figure}
  \centering
  \makebox[\textwidth]{
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/dtlz1_c4_perf1}
      \label{dtlz1_c4_perf1}
    }
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/dtlz1_c4_perf1b}
      \label{dtlz1_c4_perf1b}
    }
  }
  \caption{Performance comparison on the four-criteria DTLZ1 problem}
  \label{dtlz1_c4_perf}
\end{figure}

\begin{figure}
  \centering
  \makebox[\textwidth]{
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/dtlz1_c10_perf1}
      \label{dtlz1_c10_perf1}
    }
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/dtlz1_c10_perf1b}
      \label{dtlz1_c10_perf1b}
    }
  }
  \caption{Performance comparison on the ten-criteria DTLZ1 problem}
  \label{dtlz1_c10_perf}
\end{figure}

\begin{figure}
  \centering
  \makebox[\textwidth]{
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/dtlz7_c4_perf1}
      \label{dtlz7_c4_perf1}
    }
    \subfloat{
      \includegraphics[scale=0.53]{exp/uncert/dtlz7_c4_perf1b}
      \label{dtlz7_c4_perf1b}
    }
  }
  \caption{Performance comparison on the four-criteria DTLZ7 problem}
  \label{dtlz7_c4_perf}
\end{figure}

\begin{table}
  \centering
  \begin{tabular}{r c c c}
    \hline
    test \ optimization & supposed & rules & distance \\
    \hline
    \hline
    mix\_base & 6683.14 & 6678.95 & 0.06\% \\
    mix\_gen60 & 6680.05 & 6661.41 & 0.28\% \\
    dtlz1\_c4\_base & 7.01 & 12.81 & 45.29\% \\
    dtlz1\_c4\_gen60 & 6.48 & 15.18 & 57.28\% \\
    dtlz1\_c10\_base & 7.60 & 13.73 & 44.68\% \\
    dtlz1\_c10\_gen60 & 5.61 & 18.00 & 68.85\% \\
    dtlz7\_c4\_base & 104.72 & 108.74 & 3.69\% \\
    dtlz7\_c4\_gen60 & 104.95 & 110.28 & 4.83\% \\
    \hline
  \end{tabular}
  \caption{Performance comparison on robust multi-objective problems}
  \label{t:perf-comp}
\end{table}

The results are shown in table~\ref{t:perf-comp} and presented in
figure~\ref{pres_perf}, \ref{dtlz1_c4_perf}, \ref{dtlz1_c10_perf}
and~\ref{dtlz7_c4_perf}. There was almost no difference for the mix problem
(less than $1\%$) and a minor difference for the dtlz7 problem --- less than
$5\%$. Unfortunately, differences for dtlz1 problems (both four- and
ten-criteria) were important and noticeable --- about $50\%$ percent after ten
iterations. It looks like the problem is here to blame. This particular one is
difficult for the method. The conclusion is that the analyst should always
check if the method fits the given problem. In fact, according to the
no-free-lunch([ref]) theorem one should always do that, because there is no
optimization algorithm which is universally better than the others.

\clearpage{}

\subsection{The influence of parameters on the method}

The importance of basic parameters was evaluated again in the robust
environment. The numerical results are presented in the
table~\ref{t:base2_imp_1} and~\ref{t:base2_imp_2}. Also charts are included to
visualize the relations (fig.~\ref{params}).

Unfortunately, no clear pattern emerges. For a mix problem the solution is
robust --- changing the basic parameters changes the value of the result no
more than a $1\%$ after ten iterations.For the DTLZ7 problem the situation is
similar --- differences are bigger now, however still less than $5\%$.

Differences are bigger and important for the DTLZ1 problems (four- and
ten-criteria). However, the standard deviations are of the same order of
magnitude as mean values of the results. So one should say the results are
inconclusive here and it is impossible to make a suggestion based solely on
these results.

\begin{table}
  \centering
  \begin{tabular}{r c c c c c c}
    & \multicolumn{3}{c}{Mix problem} & \multicolumn{3}{c}{DTLZ1 c4} \\
    \hline
    test & mean & sd & improvement & mean & sd & improvement \\
    \hline
    \hline
    base & 6665.60 & 57.27 & 0.00\% & -9.99 & 6.83 & 0.00\% \\
    conf06 & 6677.63 & 44.01 & 0.18\% & -13.26 & 13.74 & 32.79\% \\
    conf08 & 6671.75 & 47.59 & 0.09\% & -12.67 & 8.17 & 26.85\% \\
    generation45 & 6661.72 & 47.52 & -0.06\% & -16.04 & 12.47 & 60.63\% \\
    generation60 & 6661.14 & 45.08 & -0.07\% & -9.63 & 7.78 & -3.61\% \\
    scenario45 & 6617.60 & 47.33 & -0.72\% & -13.12 & 11.37 & 31.34\% \\
    scenario60 & 6639.54 & 33.98 & -0.39\% & -13.95 & 8.50 & 39.68\% \\
    solution45 & 6705.68 & 52.96 & 0.60\% & -10.43 & 8.33 & 4.44\% \\
    solution60 & 6685.43 & 56.78 & 0.30\% & -11.68 & 8.23 & 16.97\% \\
    \hline
  \end{tabular}
  \caption{Importance of base parameters in robust environment}
  \label{t:base2_imp_1}
\end{table}

\begin{table}
  \centering
  \begin{tabular}{r c c c c c c}
    & \multicolumn{3}{c}{DTLZ1 c10} & \multicolumn{3}{c}{DTLZ7 c4} \\
    \hline
    test & mean & sd & improvement & mean & sd & improvement \\
    \hline
    \hline
    base & -15.30 & 11.20 & 0.00\% & -109.23 & 5.87 & 0.00\% \\
    conf06 & -16.98 & 13.01 & 10.95\% & -107.51 & 4.43 & -1.57\% \\
    conf08 & -15.31 & 9.06 & 0.07\% & -112.58 & 6.45 & 3.07\% \\
    generation45 & -15.92 & 13.27 & 4.03\% & -109.23 & 6.96 & 0.00\% \\
    generation60 & -21.63 & 12.55 & 41.37\% & -108.33 & 10.87 & -0.82\% \\
    scenario45 & -17.32 & 11.15 & 13.17\% & -111.98 & 5.34 & 2.52\% \\
    scenario60 & -16.67 & 13.30 & 8.91\% & -112.54 & 3.45 & 3.03\% \\
    solution45 & -13.89 & 9.63 & -9.22\% & -107.88 & 6.39 & -1.23\% \\
    solution60 & -9.55 & 6.81 & -37.62\% & -109.98 & 6.37 & 0.69\% \\
    \hline
  \end{tabular}
  \caption{Importance of base parameters in robust environment}
  \label{t:base2_imp_2}
\end{table}

\begin{figure}
  \centering
  \makebox[\textwidth]{
    \subfloat[Mix problem]{
      \includegraphics[scale=0.53]{exp/uncert/pres_params}
      \label{pres_params}
    }
    \subfloat[DTLZ1 four-criteria]{
      \includegraphics[scale=0.53]{exp/uncert/dtlz1_c4_params}
      \label{dtlz1_c4_params}
    }
  }
  \makebox[\textwidth]{
    \subfloat[DTLZ1 ten-criteria]{
      \includegraphics[scale=0.53]{exp/uncert/dtlz1_c10_params}
      \label{dtlz1_c10_params}
    }
    \subfloat[DTLZ7 four-criteria]{
      \includegraphics[scale=0.53]{exp/uncert/dtlz7_c4_params}
      \label{dtlz7_c4_params}
    }
  }
  \caption{Effect of params in DM's decisions}
  \label{params}
\end{figure}

\clearpage{}

\subsection{Noise in the DM's decisions}

In order to check the impact of a noise in DM's decisions, experiments were
performed. The results are presented in figure~\ref{noise} and in the
tables~\ref{t:un_noise_1} and~\ref{t:un_noise_2}.

Again one has to analyze the results excluding the DTLZ1 problem. This is
because of the standard deviation of the series of results --- again it is the
same order of magnitude as the value itself.

In the Mix and DTLZ7 problems the effect of the noise starts to be an
important factor only in case of medium- (noise$_5$) --- the results differ
about $8\%$ and in case of a major-noise (noise$_6$) --- difference about 12\%
for the mix problem and about 8\% for the DTLZ7 problem.

The situation is similar to the impact on problems defined without
uncertainty. Even if one adds the interval coefficients to the problem, the
solution is still robust with respect to the noise.


\begin{figure}
  \centering
  \makebox[\textwidth]{
    \subfloat[Mix problem]{
      \includegraphics[scale=0.53]{exp/uncert/pres_noise}
      \label{pres_noise}
    }
    \subfloat[DTLZ1 four-criteria]{
      \includegraphics[scale=0.53]{exp/uncert/dtlz1_c4_noise}
      \label{dtlz1_c4_noise}
    }
  }
  \makebox[\textwidth]{
    \subfloat[DTLZ1 ten-criteria]{
      \includegraphics[scale=0.53]{exp/uncert/dtlz1_c10_noise}
      \label{dtlz1_c10_noise}
    }
    \subfloat[DTLZ7 four-criteria]{
      \includegraphics[scale=0.53]{exp/uncert/dtlz7_c4_noise}
      \label{dtlz7_c4_noise}
    }
  }
  \caption{Effect of noise in DM's decisions}
  \label{noise}
\end{figure}


\begin{table}
  \centering
  \begin{tabular}{r c c c c c c}
    & \multicolumn{3}{c}{Mix problem} & \multicolumn{3}{c}{DTLZ1 c4} \\
    \hline
    noise level & mean & sd & improvement & mean & sd & improvement \\
    \hline
    \hline
    base & 6678.95 & 53.86 & 0.00\% & -12.81 & 8.38 & 0.00\% \\
    noise1 & 6662.93 & 36.54 & -0.24\% & -7.70 & 8.48 & 39.89\% \\
    noise2 & 6638.77 & 70.33 & -0.60\% & -12.61 & 11.36 & 1.55\% \\
    noise3 & 6636.90 & 53.88 & -0.63\% & -12.73 & 10.82 & 0.61\% \\
    noise4 & 6537.39 & 137.71 & -2.12\% & -13.65 & 7.84 & -6.55\% \\
    noise5 & 6093.31 & 811.58 & -8.77\% & -17.27 & 11.32 & -34.82\% \\
    noise6 & 5858.94 & 924.72 & -12.28\% & -13.72 & 12.45 & -7.09\% \\
    \hline
  \end{tabular}
  \caption{The impact of noise in robust environment}
  \label{t:un_noise_1}
\end{table}

 \begin{table}
  \centering
  \begin{tabular}{r c c c c c c}
    & \multicolumn{3}{c}{DTLZ1 c10} & \multicolumn{3}{c}{DTLZ7 c4} \\
    \hline
    noise level & mean & sd & improvement & mean & sd & improvement \\
    \hline
    \hline
    base & -13.73 & 8.08 & 0.00\% & -108.86 & 4.00 & 0.00\% \\
    noise1 & -17.34 & 9.07 & -26.23\% & -109.48 & 7.03 & -0.57\% \\
    noise2 & -20.58 & 13.18 & -49.83\% & -115.45 & 7.33 & -6.06\% \\
    noise3 & -21.52 & 11.72 & -56.70\% & -112.61 & 5.84 & -3.45\% \\
    noise4 & -21.47 & 9.29 & -56.36\% & -112.38 & 6.51 & -3.24\% \\
    noise5 & -24.86 & 13.03 & -81.01\% & -117.84 & 6.78 & -8.26\% \\
    noise6 & -24.89 & 11.79 & -81.21\% & -117.45 & 7.21 & -7.89\% \\
    \hline
  \end{tabular}
  \caption{The impact of noise in robust environment}
  \label{t:un_noise_2}
\end{table}


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "main"
%%% End: 
